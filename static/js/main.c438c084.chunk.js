(this["webpackJsonprensdk-tutorial"]=this["webpackJsonprensdk-tutorial"]||[]).push([[0],{214:function(e){e.exports=JSON.parse('[{"constant":false,"inputs":[{"name":"_msg","type":"bytes"},{"name":"_amount","type":"uint256"},{"name":"_nHash","type":"bytes32"},{"name":"_sig","type":"bytes"}],"name":"deposit","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_msg","type":"bytes"},{"name":"_to","type":"bytes"},{"name":"_amount","type":"uint256"}],"name":"withdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"registry","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"balance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_registry","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_amount","type":"uint256"},{"indexed":false,"name":"_msg","type":"bytes"}],"name":"Deposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_to","type":"bytes"},{"indexed":false,"name":"_amount","type":"uint256"},{"indexed":false,"name":"_msg","type":"bytes"}],"name":"Withdraw","type":"event"}]')},363:function(e,t,n){e.exports=n(877)},368:function(e,t,n){},383:function(e,t){},390:function(e,t){},409:function(e,t){},411:function(e,t){},44:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=44},497:function(e,t){},684:function(e,t){},818:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=818},875:function(e,t,n){},877:function(e,t,n){"use strict";n.r(t);var a=n(35),r=n.n(a),o=n(357),s=n.n(o),c=(n(368),n(40)),i=n.n(c),u=n(121),l=n(358),p=n(361),m=n(359),d=n(362),f=n(122),b=n.n(f),w=n(360),y=n.n(w),h=(n(875),n(214)),g="0xb2731C04610C10f2eB6A26ad14E607d44309FC10",x=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=13;break}return t=window.ethereum,e.prev=2,e.next=5,window.ethereum.enable();case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),n.logError("Please allow access to your Web3 wallet."),e.abrupt("return");case 11:e.next=19;break;case 13:if(!window.web3){e.next=17;break}t=window.web3.currentProvider,e.next=19;break;case 17:return n.logError("Please install MetaMask!"),e.abrupt("return");case 19:return a=new y.a(t),e.next=22,a.eth.net.getId();case 22:if(42===e.sent){e.next=26;break}return n.logError("Please set your network to Kovan."),e.abrupt("return");case 26:n.setState({web3:a},(function(){n.updateBalance(),setInterval((function(){n.updateBalance()}),1e4)}));case 27:case"end":return e.stop()}}),e,null,[[2,7]])}))),n.render=function(){var e=n.state,t=e.balance,a=e.message,o=e.error;return r.a.createElement("div",{className:"App"},r.a.createElement("p",null,"Balance: ",t," BTC"),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return n.deposit().catch(n.logError)}},"Deposit 0.001 BTC")),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return n.withdraw().catch(n.logError)}},"Withdraw ",t," BTC")),r.a.createElement("p",null,a),o?r.a.createElement("p",{style:{color:"red"}},o):null)},n.updateBalance=Object(u.a)(i.a.mark((function e(){var t,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.web3,a=new t.eth.Contract(h,g),e.next=4,a.methods.balance().call();case 4:r=e.sent,n.setState({balance:parseInt(r.toString())/Math.pow(10,8)});case 6:case"end":return e.stop()}}),e)}))),n.logError=function(e){console.error(e),n.setState({error:String((e||{}).message||e)})},n.log=function(e){n.setState({message:e})},n.deposit=Object(u.a)(i.a.mark((function e(){var t,a,r,o,s,c,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.logError(""),t=n.state,a=t.web3,r=t.sdk,o=.001,s=r.shiftIn({sendToken:b.a.Tokens.BTC.Btc2Eth,sendAmount:o*Math.pow(10,8),sendTo:g,contractFn:"deposit",contractParams:[{name:"_msg",type:"bytes",value:a.utils.fromAscii("Depositing ".concat(o," BTC"))}]}),c=s.addr(),n.log("Deposit ".concat(o," BTC to ").concat(c)),0,e.next=9,s.waitForDeposit(0);case 9:return u=e.sent,n.log("Submitting to RenVM..."),e.next=13,u.submitToRenVM();case 13:return l=e.sent,n.log("Submitting to smart contract..."),e.next=17,l.submitToEthereum(a.currentProvider);case 17:n.log("Deposited ".concat(o," BTC."));case 18:case"end":return e.stop()}}),e)}))),n.withdraw=Object(u.a)(i.a.mark((function e(){var t,a,r,o,s,c,u,l,p,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.logError(""),t=n.state,a=t.web3,r=t.sdk,o=t.balance,s=o,c=prompt("Enter BTC recipient:"),e.next=6,a.eth.getAccounts();case 6:return u=e.sent[0],l=new a.eth.Contract(h,g),n.log("Calling `withdraw` on smart contract..."),e.next=11,new Promise((function(e,t){l.methods.withdraw(a.utils.fromAscii("Depositing ".concat(s," BTC")),b.a.Tokens.BTC.addressToHex(c),s*Math.pow(10,8)).send({from:u}).on("transactionHash",e).catch(t)}));case 11:return p=e.sent,n.log("Retrieving burn event from contract..."),e.next=15,r.shiftOut({sendToken:b.a.Tokens.BTC.Eth2Btc,web3Provider:a.currentProvider,txHash:p}).readFromEthereum();case 15:return m=e.sent,n.log("Submitting to Darknodes..."),e.next=19,m.submitToRenVM();case 19:n.log("Withdrew ".concat(s," BTC to ").concat(c,"."));case 20:case"end":return e.stop()}}),e)}))),n.state={balance:0,message:"",error:"",sdk:new b.a("testnet")},n}return Object(d.a)(t,e),t}(r.a.Component);s.a.render(r.a.createElement(x,null),document.getElementById("root"))}},[[363,1,2]]]);
//# sourceMappingURL=main.c438c084.chunk.js.map