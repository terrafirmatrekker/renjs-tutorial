(this["webpackJsonprenjs-tutorial"]=this["webpackJsonprenjs-tutorial"]||[]).push([[0],{1094:function(e,t,n){},1096:function(e,t,n){"use strict";n.r(t);var a=n(47),r=n.n(a),o=n(449),s=n.n(o),c=(n(460),n(7)),i=n.n(c),u=n(450),l=n(453),p=n(451),m=n(454),d=n(162),f=n.n(d),b=n(452),w=n.n(b),y=(n(1094),n(287)),h="0xb2731C04610C10f2eB6A26ad14E607d44309FC10",g=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=function(){var e,t;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.ethereum){a.next=13;break}return e=window.ethereum,a.prev=2,a.next=5,i.a.awrap(window.ethereum.enable());case 5:a.next=11;break;case 7:return a.prev=7,a.t0=a.catch(2),n.logError("Please allow access to your Web3 wallet."),a.abrupt("return");case 11:a.next=19;break;case 13:if(!window.web3){a.next=17;break}e=window.web3.currentProvider,a.next=19;break;case 17:return n.logError("Please install MetaMask!"),a.abrupt("return");case 19:return t=new w.a(e),a.next=22,i.a.awrap(t.eth.net.getId());case 22:if(42===a.sent){a.next=26;break}return n.logError("Please set your network to Kovan."),a.abrupt("return");case 26:n.setState({web3:t},(function(){n.updateBalance(),setInterval((function(){n.updateBalance()}),1e4)}));case 27:case"end":return a.stop()}}),null,null,[[2,7]])},n.render=function(){var e=n.state,t=e.balance,a=e.message,o=e.error;return r.a.createElement("div",{className:"App"},r.a.createElement("p",null,"Balance: ",t," BTC"),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return n.deposit().catch(n.logError)}},"Deposit 0.001 BTC")),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return n.withdraw().catch(n.logError)}},"Withdraw ",t," BTC")),r.a.createElement("p",null,a),o?r.a.createElement("p",{style:{color:"red"}},o):null)},n.updateBalance=function(){var e,t,a;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=n.state.web3,t=new e.eth.Contract(y,h),r.next=4,i.a.awrap(t.methods.balance().call());case 4:a=r.sent,n.setState({balance:parseInt(a.toString())/Math.pow(10,8)});case 6:case"end":return r.stop()}}))},n.logError=function(e){console.error(e),n.setState({error:String((e||{}).message||e)})},n.log=function(e){n.setState({message:e})},n.deposit=function(){var e,t,a,r,o,s,c,u;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return n.logError(""),e=n.state,t=e.web3,a=e.renJS,r=.001,o=a.shiftIn({sendToken:f.a.Tokens.BTC.Btc2Eth,sendAmount:Math.floor(r*Math.pow(10,8)),sendTo:h,contractFn:"deposit",nonce:a.utils.randomNonce(),contractParams:[{name:"_msg",type:"bytes",value:t.utils.fromAscii("Depositing ".concat(r," BTC"))}]}),s=o.addr(),n.log("Deposit ".concat(r," BTC to ").concat(s)),0,l.next=9,i.a.awrap(o.waitForDeposit(0));case 9:return c=l.sent,n.log("Submitting to RenVM..."),l.next=13,i.a.awrap(c.submitToRenVM());case 13:return u=l.sent,n.log("Submitting to smart contract..."),l.next=17,i.a.awrap(u.submitToEthereum(t.currentProvider));case 17:n.log("Deposited ".concat(r," BTC."));case 18:case"end":return l.stop()}}))},n.withdraw=function(){var e,t,a,r,o,s,c,u,l,p;return i.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return n.logError(""),e=n.state,t=e.web3,a=e.renJS,r=e.balance,o=r,s=prompt("Enter BTC recipient:"),m.next=6,i.a.awrap(t.eth.getAccounts());case 6:return c=m.sent[0],u=new t.eth.Contract(y,h),n.log("Calling `withdraw` on smart contract..."),m.next=11,i.a.awrap(new Promise((function(e,n){u.methods.withdraw(t.utils.fromAscii("Depositing ".concat(o," BTC")),f.a.Tokens.BTC.addressToHex(s),Math.floor(o*Math.pow(10,8))).send({from:c}).on("transactionHash",e).catch(n)})));case 11:return l=m.sent,n.log("Retrieving burn event from contract..."),m.next=15,i.a.awrap(a.shiftOut({sendToken:f.a.Tokens.BTC.Eth2Btc,web3Provider:t.currentProvider,txHash:l}).readFromEthereum());case 15:return p=m.sent,n.log("Submitting to Darknodes..."),m.next=19,i.a.awrap(p.submitToRenVM());case 19:n.log("Withdrew ".concat(o," BTC to ").concat(s,"."));case 20:case"end":return m.stop()}}))},n.state={balance:0,message:"",error:"",renJS:new f.a("testnet")},n}return Object(m.a)(t,e),t}(r.a.Component);s.a.render(r.a.createElement(g,null),document.getElementById("root"))},287:function(e){e.exports=JSON.parse('[{"constant":false,"inputs":[{"name":"_msg","type":"bytes"},{"name":"_amount","type":"uint256"},{"name":"_nHash","type":"bytes32"},{"name":"_sig","type":"bytes"}],"name":"deposit","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_msg","type":"bytes"},{"name":"_to","type":"bytes"},{"name":"_amount","type":"uint256"}],"name":"withdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"registry","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"balance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_registry","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_amount","type":"uint256"},{"indexed":false,"name":"_msg","type":"bytes"}],"name":"Deposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_to","type":"bytes"},{"indexed":false,"name":"_amount","type":"uint256"},{"indexed":false,"name":"_msg","type":"bytes"}],"name":"Withdraw","type":"event"}]')},455:function(e,t,n){e.exports=n(1096)},460:function(e,t,n){},472:function(e,t){},479:function(e,t){},498:function(e,t){},500:function(e,t){},582:function(e,t){},715:function(e,t){},842:function(e,t){}},[[455,1,2]]]);
//# sourceMappingURL=main.24ecbec7.chunk.js.map