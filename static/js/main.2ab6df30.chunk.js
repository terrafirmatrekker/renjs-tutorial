(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{216:function(e){e.exports=[{constant:!1,inputs:[{name:"_msg",type:"bytes"},{name:"_amount",type:"uint256"},{name:"_nHash",type:"bytes32"},{name:"_sig",type:"bytes"}],name:"deposit",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_msg",type:"bytes"},{name:"_to",type:"bytes"},{name:"_amount",type:"uint256"}],name:"withdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"registry",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"balance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_registry",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"_amount",type:"uint256"},{indexed:!1,name:"_msg",type:"bytes"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_to",type:"bytes"},{indexed:!1,name:"_amount",type:"uint256"},{indexed:!1,name:"_msg",type:"bytes"}],name:"Withdraw",type:"event"}]},358:function(e,t,n){e.exports=n(881)},363:function(e,t,n){},379:function(e,t){},385:function(e,t){},404:function(e,t){},406:function(e,t){},509:function(e,t){},879:function(e,t,n){},881:function(e,t,n){"use strict";n.r(t);var a=n(38),s=n.n(a),o=n(351),r=n.n(o),c=(n(363),n(52)),i=n.n(c),u=n(121),p=n(352),m=n(353),d=n(356),l=n(354),b=n(357),w=n(122),y=n.n(w),h=n(355),f=n.n(h),g=(n(879),n(216)),v="0x200870dd0f84ddd64fc96a25d9e9107cba30a092",x=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(d.a)(this,Object(l.a)(t).call(this,e))).updateBalance=Object(u.a)(i.a.mark(function e(){var t,a,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.web3,a=new t.eth.Contract(g,v),e.next=4,a.methods.balance().call();case 4:s=e.sent,n.setState({balance:parseInt(s.toString())/Math.pow(10,8)});case 6:case"end":return e.stop()}},e)})),n.log=function(e){n.setState({message:e})},n.deposit=Object(u.a)(i.a.mark(function e(){var t,a,s,o,r,c,u,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.web3,s=t.sdk,o=.001,r=s.shiftIn({sendToken:y.a.Tokens.BTC.Btc2Eth,sendAmount:o*Math.pow(10,8),sendTo:v,contractFn:"deposit",contractParams:[{name:"_msg",type:"bytes",value:a.utils.fromAscii("Depositing ".concat(o," BTC"))}]}),c=r.addr(),n.log("Deposit ".concat(o," BTC to ").concat(c)),0,e.next=8,r.waitForDeposit(0);case 8:return u=e.sent,n.log("Submitting to RenVM..."),e.next=12,u.submitToRenVM();case 12:return p=e.sent,n.log("Submitting to smart contract..."),e.next=16,p.submitToEthereum(a.currentProvider);case 16:n.log("Deposited ".concat(o," BTC."));case 17:case"end":return e.stop()}},e)})),n.withdraw=Object(u.a)(i.a.mark(function e(){var t,a,s,o,r,c,u,p,m,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.web3,s=t.sdk,o=t.balance,r=o,c=prompt("Enter BTC recipient:"),e.next=5,a.eth.getAccounts();case 5:return u=e.sent[0],p=new a.eth.Contract(g,v),n.log("Calling `withdraw` on smart contract..."),e.next=10,new Promise(function(e,t){p.methods.withdraw(a.utils.fromAscii("Depositing ".concat(r," BTC")),y.a.Tokens.BTC.addressToHex(c),r*Math.pow(10,8)).send({from:u}).on("transactionHash",e).catch(t)});case 10:return m=e.sent,n.log("Retrieving burn event from contract..."),e.next=14,s.shiftOut({sendToken:y.a.Tokens.BTC.Eth2Btc,web3Provider:a.currentProvider,txHash:m}).readFromEthereum();case 14:return d=e.sent,n.log("Submitting to Darknodes..."),e.next=18,d.submitToRenVM();case 18:n.log("Withdrew ".concat(r," BTC to ").concat(c,"."));case 19:case"end":return e.stop()}},e)})),n.state={balance:0,message:"",sdk:new y.a("testnet")},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark(function e(){var t,n,a=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=12;break}return t=window.ethereum,e.prev=2,e.next=5,window.ethereum.enable();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("User denied account access");case 10:e.next=13;break;case 12:window.web3?t=window.web3.currentProvider:this.log("Please install MetaMask!");case 13:n=new f.a(t),this.setState({web3:n},function(){a.updateBalance(),setInterval(function(){a.updateBalance()},1e4)});case 15:case"end":return e.stop()}},e,this,[[2,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.balance,n=e.message;return s.a.createElement("div",{className:"App"},s.a.createElement("p",null,"Balance: ",t," BTC"),s.a.createElement("p",null,s.a.createElement("button",{onClick:this.deposit},"Deposit 0.001 BTC")),s.a.createElement("p",null,s.a.createElement("button",{onClick:this.withdraw},"Withdraw ",t," BTC")),s.a.createElement("p",null,n))}}]),t}(s.a.Component);r.a.render(s.a.createElement(x,null),document.getElementById("root"))}},[[358,1,2]]]);
//# sourceMappingURL=main.2ab6df30.chunk.js.map