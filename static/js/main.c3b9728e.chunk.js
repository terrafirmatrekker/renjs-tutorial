(this["webpackJsonprenjs-tutorial"]=this["webpackJsonprenjs-tutorial"]||[]).push([[0],{1110:function(e,t,n){},472:function(e,t,n){"use strict";(function(e){var a=n(1),r=n.n(a),s=n(47),o=n(106),c=n(105),u=n(107),i=n(56),l=n.n(i),p=n(183),f=n(476),m=n.n(f),y=(n(1110),n(477)),d="0x3aa969d343bd6ae66c4027bb61a382dc96e88150",b=function(t){function n(t){var a;return Object(s.a)(this,n),(a=Object(o.a)(this,Object(c.a)(n).call(this,t))).componentDidMount=function(){var e,t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.ethereum){n.next=13;break}return e=window.ethereum,n.prev=2,n.next=5,r.a.awrap(window.ethereum.enable());case 5:n.next=11;break;case 7:return n.prev=7,n.t0=n.catch(2),a.logError("Please allow access to your Web3 wallet."),n.abrupt("return");case 11:n.next=19;break;case 13:if(!window.web3){n.next=17;break}e=window.web3.currentProvider,n.next=19;break;case 17:return a.logError("Please install MetaMask!"),n.abrupt("return");case 19:return t=new m.a(e),n.next=22,r.a.awrap(t.eth.net.getId());case 22:if(42===n.sent){n.next=26;break}return a.logError("Please set your network to Kovan."),n.abrupt("return");case 26:a.setState({web3:t},(function(){a.updateBalance(),setInterval((function(){a.updateBalance()}),1e4)})),a.recoverTransfers().catch(a.logError);case 28:case"end":return n.stop()}}),null,null,[[2,7]])},a.render=function(){var e=a.state,t=e.balance,n=e.message,r=e.error;return l.a.createElement("div",{className:"App"},l.a.createElement("p",null,"Balance: ",t," BTC"),l.a.createElement("p",null,l.a.createElement("button",{onClick:function(){return a.deposit().catch(a.logError)}},"Deposit 0.001 BTC")),l.a.createElement("p",null,l.a.createElement("button",{onClick:function(){return a.withdraw().catch(a.logError)}},"Withdraw ",t," BTC")),l.a.createElement("p",null,n),r?l.a.createElement("p",{style:{color:"red"}},r):null)},a.updateBalance=function(){var e,t,n;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=a.state.web3,t=new e.eth.Contract(y,d),s.next=4,r.a.awrap(t.methods.balance().call());case 4:n=s.sent,a.setState({balance:parseInt(n.toString())/Math.pow(10,8)});case 6:case"end":return s.stop()}}))},a.logError=function(e){console.error(e),a.setState({error:String((e||{}).message||e)})},a.log=function(e){a.setState({message:e})},a.deposit=function(){var e,t,n,s;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=a.state,t=e.web3,n=e.gatewayJS,s=.001,o.prev=2,o.next=5,r.a.awrap(n.open({sendToken:p.a.Tokens.BTC.Btc2Eth,suggestedAmount:Math.floor(s*Math.pow(10,8)),sendTo:d,contractFn:"deposit",nonce:p.a.utils.randomNonce(),contractParams:[{name:"_msg",type:"bytes",value:t.utils.fromAscii("Depositing ".concat(s," BTC"))}],web3Provider:t.currentProvider}).result());case 5:a.log("Deposited ".concat(s," BTC.")),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(2),a.logError(o.t0);case 11:case"end":return o.stop()}}),null,null,[[2,8]])},a.withdraw=function(){var t,n,s,o,c,u;return r.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=a.state,n=t.web3,s=t.gatewayJS,o=t.balance,c=o,u=prompt("Enter BTC recipient:"),i.next=5,r.a.awrap(s.open({sendToken:p.a.Tokens.BTC.Eth2Btc,sendTo:d,contractFn:"withdraw",contractParams:[{name:"_msg",type:"bytes",value:n.utils.fromAscii("Withdrawing ".concat(c," BTC"))},{name:"_to",type:"bytes",value:"0x"+e.from(u).toString("hex")},{name:"_amount",type:"uint256",value:Math.floor(c*Math.pow(10,8))}],web3Provider:n.currentProvider}).result());case 5:a.log("Withdrew ".concat(c," BTC to ").concat(u,"."));case 6:case"end":return i.stop()}}))},a.recoverTransfers=function(){var e,t,n,s,o,c,u;return r.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e=a.state,t=e.web3,n=e.gatewayJS,i.next=3,r.a.awrap(n.getGateways());case 3:for(s=i.sent,o=0,c=Array.from(s.values());o<c.length;o++)u=c[o],n.recoverTransfer(t.currentProvider,u).pause().result().catch(a.logError);case 5:case"end":return i.stop()}}))},a.state={balance:0,message:"",error:"",gatewayJS:new p.a("testnet")},a}return Object(u.a)(n,t),n}(l.a.Component);t.a=b}).call(this,n(0).Buffer)},477:function(e){e.exports=JSON.parse('[{"constant":false,"inputs":[{"name":"_msg","type":"bytes"},{"name":"_amount","type":"uint256"},{"name":"_nHash","type":"bytes32"},{"name":"_sig","type":"bytes"}],"name":"deposit","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_msg","type":"bytes"},{"name":"_to","type":"bytes"},{"name":"_amount","type":"uint256"}],"name":"withdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"registry","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"balance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_registry","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_amount","type":"uint256"},{"indexed":false,"name":"_msg","type":"bytes"}],"name":"Deposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_to","type":"bytes"},{"indexed":false,"name":"_amount","type":"uint256"},{"indexed":false,"name":"_msg","type":"bytes"}],"name":"Withdraw","type":"event"}]')},478:function(e,t,n){e.exports=n(479)},479:function(e,t,n){"use strict";n.r(t);var a=n(56),r=n.n(a),s=n(471),o=n.n(s),c=(n(484),n(472));o.a.render(r.a.createElement(c.a,null),document.getElementById("root"))},484:function(e,t,n){},490:function(e,t){},497:function(e,t){},516:function(e,t){},518:function(e,t){},738:function(e,t){},749:function(e,t){}},[[478,1,2]]]);
//# sourceMappingURL=main.c3b9728e.chunk.js.map